<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chaos Cookie</title>

<link href="https://fonts.googleapis.com/css2?family=Roca+Two:wght@700&display=swap" rel="stylesheet">

<style>
body {
  font-family: 'Segoe UI', sans-serif;
  background: radial-gradient(circle at bottom, #0d0d1a 0%, #000 100%);
  color: #fff;
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 100vh;
  padding: 2rem;
}

h1 {
  font-family: 'Roca Two', serif;
  font-size: 3rem;
  color: #a855f7;
}

button {
  background: linear-gradient(90deg, #a855f7, #ff00ff);
  color: #fff;
  font-weight: bold;
  padding: .9rem 1.6rem;
  border-radius: 14px;
  margin: .5rem;
  cursor: pointer;
  border: none;
}

button:hover { transform: scale(1.05); }

.card {
  max-width: 420px;
  width: 100%;
  background: #1a1a2e;
  border-radius: 18px;
  padding: 2rem;
  text-align: center;
  font-size: 1.25rem;
  font-weight: bold;
  color: #a855f7;
  box-shadow: 0 0 20px rgba(168,85,247,0.5);
  margin: 1rem 0;
  position: relative;
}

.badge {
  position: absolute;
  top: 12px;
  right: 12px;
  background: gold;
  color: #000;
  font-size: .7rem;
  padding: .3rem .6rem;
  border-radius: 999px;
  font-weight: bold;
}

.pack-desc {
  font-size: .95rem;
  color: #ddd;
  margin: .75rem 0 1.2rem;
}

/* MODAL */
.modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.75);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 999;
}

.modal.show { display: flex; }

.modal-box {
  background: #1a1a2e;
  border-radius: 20px;
  padding: 2rem;
  text-align: center;
  max-width: 320px;
  box-shadow: 0 0 30px rgba(168,85,247,.6);
}

.modal h2 {
  color: #a855f7;
  margin-bottom: .5rem;
}

.modal p {
  font-size: .95rem;
  margin-bottom: 1.5rem;
  color: #ddd;
}

.modal .price {
  font-size: 1.2rem;
  margin-bottom: 1.2rem;
  color: gold;
}
</style>
</head>

<body>

<h1>Chaos Cookie</h1>
<p style="color:#c084fc;font-weight:bold">Click and let the universe embarrass you ðŸ”®</p>

<button id="generate">Crack the Fortune ðŸ’¥</button>

<div id="fortune" class="card">
  âœ¨ Your fortune will appear here âœ¨
</div>

<!-- PREMIUM PACKS -->
<div class="card">
  <span class="badge">PREMIUM</span>
  <h3>Love Pack ðŸ’”</h3>
  <p class="pack-desc">Unhinged romantic chaos, delusions & situationships.</p>
  <button onclick="openPay('Love Pack')">Unlock</button>
</div>

<div class="card">
  <span class="badge">PREMIUM</span>
  <h3>Money Pack ðŸ’¸</h3>
  <p class="pack-desc">Financial delusion, broke prophecies & fake abundance.</p>
  <button onclick="openPay('Money Pack')">Unlock</button>
</div>

<div class="card">
  <span class="badge">PREMIUM</span>
  <h3>Petty Pack ðŸ˜ˆ</h3>
  <p class="pack-desc">Spiritual shade, karma & elite-level pettiness.</p>
  <button onclick="openPay('Petty Pack')">Unlock</button>
</div>

<!-- MODAL -->
<div id="payModal" class="modal">
  <div class="modal-box">
    <h2 id="modalTitle"></h2>
    <p>Unlock this premium pack forever</p>
    <div class="price">R20 Â· once-off</div>
    <button id="confirmPay">Pay with PayFast</button>
    <button onclick="closeModal()" style="background:#333">Cancel</button>
  </div>
</div>

<script>
const fortunes = [
  "Your bank account will scream today â€” politely.",
  "Someone who ghosted you will remember you at 2am.",
  "A blessing disguised as nonsense is loading.",
  "Your next decision will be unhinged but iconic.",
  "Someone is silently competing with you. Theyâ€™re losing."
];

const fortuneDiv = document.getElementById('fortune');

document.getElementById('generate').onclick = () => {
  fortuneDiv.textContent =
    fortunes[Math.floor(Math.random() * fortunes.length)];
};

let selectedPack = null;

function openPay(pack) {
  selectedPack = pack;
  document.getElementById('modalTitle').textContent = pack;
  document.getElementById('payModal').classList.add('show');
}

function closeModal() {
  document.getElementById('payModal').classList.remove('show');
}

document.getElementById('confirmPay').onclick = () => {
  if (!selectedPack) return;

  // ðŸš€ LIVE PAYFAST via Netlify Function
  window.location.href =
    `/.netlify/functions/payfast?pack=${encodeURIComponent(selectedPack)}&amount=20`;
};
</script>

</body>
</html>